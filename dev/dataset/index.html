<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Datasets · NCDatasets.jl</title><meta name="title" content="Datasets · NCDatasets.jl"/><meta property="og:title" content="Datasets · NCDatasets.jl"/><meta property="twitter:title" content="Datasets · NCDatasets.jl"/><meta name="description" content="Documentation for NCDatasets.jl."/><meta property="og:description" content="Documentation for NCDatasets.jl."/><meta property="twitter:description" content="Documentation for NCDatasets.jl."/><meta property="og:url" content="https://alexander-barth.github.io/NCDatasets.jl/dataset/"/><meta property="twitter:url" content="https://alexander-barth.github.io/NCDatasets.jl/dataset/"/><link rel="canonical" href="https://alexander-barth.github.io/NCDatasets.jl/dataset/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="NCDatasets.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">NCDatasets.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Datasets</a><ul class="internal"><li><a class="tocitem" href="#Groups"><span>Groups</span></a></li><li><a class="tocitem" href="#Common-methods"><span>Common methods</span></a></li></ul></li><li><a class="tocitem" href="../dimensions/">Dimensions</a></li><li><a class="tocitem" href="../variables/">Variables</a></li><li><a class="tocitem" href="../attributes/">Attributes</a></li><li><a class="tocitem" href="../performance/">Performance tips</a></li><li><a class="tocitem" href="../other/">Other features</a></li><li><a class="tocitem" href="../issues/">Known issues</a></li><li><a class="tocitem" href="../tutorials/">Tutorials</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Datasets</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Datasets</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Alexander-Barth/NCDatasets.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/master/docs/src/dataset.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Datasets"><a class="docs-heading-anchor" href="#Datasets">Datasets</a><a id="Datasets-1"></a><a class="docs-heading-anchor-permalink" href="#Datasets" title="Permalink"></a></h1><p>This page is about loading/writing, examining and operating directly on entire NetCDF datasets. For functions regarding the variables stored in them, see the <a href="../variables/#Variables">Variables</a> page.</p><p>Both variables and datasets share the functionality of the <a href="../attributes/#Attributes">Attributes</a> section.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NCDatasets.NCDataset" href="#NCDatasets.NCDataset"><code>NCDatasets.NCDataset</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NCDataset(filename::AbstractString, mode = &quot;r&quot;;
          format::Symbol = :netcdf4,
          share::Bool = false,
          diskless::Bool = false,
          persist::Bool = false,
          memory::Union{Vector{UInt8},Nothing} = nothing,
          attrib = [])</code></pre><p>Load, create, or even overwrite a NetCDF file at <code>filename</code>, depending on <code>mode</code></p><ul><li><code>&quot;r&quot;</code> (default) : open an existing netCDF file or OPeNDAP URL  in read-only mode.</li><li><code>&quot;c&quot;</code> : create a new NetCDF file at <code>filename</code> (an existing file with the same name will be overwritten).</li><li><code>&quot;a&quot;</code> : open <code>filename</code> into append mode (i.e. existing data in the netCDF file is not overwritten and a variable can be added).</li></ul><p>If <code>share</code> is true, the <code>NC_SHARE</code> flag is set allowing to have multiple processes to read the file and one writer process (netcdf classic files only). Likewise setting <code>diskless</code> or <code>persist</code> to <code>true</code> will enable the flags <code>NC_DISKLESS</code> or <code>NC_PERSIST</code> flag. More information is available in the <a href="https://www.unidata.ucar.edu/software/netcdf/docs/">NetCDF C-API</a>.</p><p>Notice that this does not close the dataset, use <code>close</code> on the result (or see below the <code>do</code>-block).</p><p>The optional parameter <code>attrib</code> is an iterable of attribute name and attribute value pairs, for example a <code>Dict</code>, <code>DataStructures.OrderedDict</code> or simply a vector of pairs (see example below).</p><p><strong>Supported <code>format</code> values:</strong></p><ul><li><code>:netcdf4</code> (default): HDF5-based NetCDF format.</li><li><code>:netcdf4_classic</code>: Only netCDF 3 compatible API features will be used.</li><li><code>:netcdf3_classic</code>: classic netCDF format supporting only files smaller than 2GB.</li><li><code>:netcdf3_64bit_offset</code>: improved netCDF format supporting files larger than 2GB.</li><li><code>:netcdf5_64bit_data</code>: improved netCDF format supporting 64-bit integer data types.</li></ul><p>Files can also be open and automatically closed with a <code>do</code> block.</p><pre><code class="language-julia hljs">NCDataset(&quot;file.nc&quot;) do ds
    data = ds[&quot;temperature&quot;][:,:]
end</code></pre><p>Here is an attribute example:</p><pre><code class="language-julia hljs">using DataStructures
NCDataset(&quot;file.nc&quot;, &quot;c&quot;, attrib = OrderedDict(&quot;title&quot; =&gt; &quot;my first netCDF file&quot;)) do ds
   defVar(ds,&quot;temp&quot;,[10.,20.,30.],(&quot;time&quot;,))
end;</code></pre><p>The NetCDF dataset can also be a <code>memory</code> as a vector of bytes. A non-empty string a <code>filename</code> is still required, for example:</p><pre><code class="language-julia hljs">using NCDataset, HTTP
resp = HTTP.get(&quot;https://www.unidata.ucar.edu/software/netcdf/examples/ECMWF_ERA-40_subset.nc&quot;)
ds = NCDataset(&quot;some_string&quot;,&quot;r&quot;,memory = resp.body)
total_precipitation = ds[&quot;tp&quot;][:,:,:]
close(ds)</code></pre><p><code>Dataset</code> is an alias of <code>NCDataset</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/2e4f51ae278174846d92fa4be4c7315e545efcf8/src/dataset.jl#L101-L170">source</a></section><section><div><pre><code class="language-julia hljs">mfds = NCDataset(fnames, mode = &quot;r&quot;; aggdim = nothing, deferopen = true,
              isnewdim = false,
              constvars = [])</code></pre><p>Opens a multi-file dataset in read-only <code>&quot;r&quot;</code> or append mode <code>&quot;a&quot;</code>. <code>fnames</code> is a vector of file names.</p><p>Variables are aggregated over the first unlimited dimension or over the dimension <code>aggdim</code> if specified. Variables without the dimensions <code>aggdim</code> are not aggregated. All variables containing the dimension <code>aggdim</code> are aggregated. The variable who do not contain the dimension <code>aggdim</code> are assumed constant.</p><p>If variables should be aggregated over a new dimension (not present in the NetCDF file), one should set <code>isnewdim</code> to <code>true</code>. All NetCDF files should have the same variables, attributes and groupes. Per default, all variables will have an additional dimension unless they are marked as constant using the <code>constvars</code> parameter.</p><p>The append mode is only implemented when <code>deferopen</code> is <code>false</code>. If deferopen is <code>false</code>, all files are opened at the same time. However the operating system might limit the number of open files. In Linux, the limit can be controled with the <a href="https://stackoverflow.com/questions/34588/how-do-i-change-the-number-of-open-files-limit-in-linux">command <code>ulimit</code></a>.</p><p>All metadata (attributes and dimension length are assumed to be the same for all NetCDF files. Otherwise reading the attribute of a multi-file dataset would be ambiguous. An exception to this rule is the length of the dimension over which the data is aggregated. This aggregation dimension can varify from file to file.</p><p>Setting the experimental flag <code>_aggdimconstant</code> to <code>true</code> means that the length of the aggregation dimension is constant. This speeds up the creating of a multi-file dataset as only the metadata of the first file has to be loaded.</p><p>Examples:</p><p>You can use <a href="https://github.com/vtjnash/Glob.jl">Glob.jl</a> to make <code>fnames</code> from a file pattern, e.g.</p><pre><code class="language-julia hljs">using NCDatasets, Glob
ds = NCDataset(glob(&quot;ERA5_monthly3D_reanalysis_*.nc&quot;))</code></pre><p>Aggregation over a new dimension:</p><pre><code class="language-julia hljs">using NCDatasets
for i = 1:3
  NCDataset(&quot;foo$i.nc&quot;,&quot;c&quot;) do ds
    defVar(ds,&quot;data&quot;,[10., 11., 12., 13.], (&quot;lon&quot;,))
  end
end

ds = NCDataset([&quot;foo$i.nc&quot; for i = 1:3],aggdim = &quot;sample&quot;, isnewdim = true)
size(ds[&quot;data&quot;])
# output
# (4, 3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/2e4f51ae278174846d92fa4be4c7315e545efcf8/src/multifile.jl#L1-L62">source</a></section></article><p>Useful functions that operate on datasets are:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.keys-Tuple{NCDataset}" href="#Base.keys-Tuple{NCDataset}"><code>Base.keys</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">keys(ds::NCDataset)</code></pre><p>Return a list of all variables names in NCDataset <code>ds</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/2e4f51ae278174846d92fa4be4c7315e545efcf8/src/dataset.jl#L264-L268">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.haskey" href="#Base.haskey"><code>Base.haskey</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">haskey(ds::NCDataset,name)
haskey(d::Dimensions,name)
haskey(ds::Attributes,name)</code></pre><p>Return true if the NCDataset <code>ds</code> (or dimension/attribute list) has a variable (dimension/attribute) with the name <code>name</code>. For example:</p><pre><code class="language-julia hljs">ds = NCDataset(&quot;/tmp/test.nc&quot;,&quot;r&quot;)
if haskey(ds,&quot;temperature&quot;)
    println(&quot;The file has a variable &#39;temperature&#39;&quot;)
end

if haskey(ds.dim,&quot;lon&quot;)
    println(&quot;The file has a dimension &#39;lon&#39;&quot;)
end</code></pre><p>This example checks if the file <code>/tmp/test.nc</code> has a variable with the name <code>temperature</code> and a dimension with the name <code>lon</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/2e4f51ae278174846d92fa4be4c7315e545efcf8/src/dataset.jl#L331-L352">source</a></section><section><div><pre><code class="language-julia hljs">Base.haskey(a::Attributes,name::SymbolOrString)</code></pre><p>Check if <code>name</code> is an attribute</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/2e4f51ae278174846d92fa4be4c7315e545efcf8/src/attributes.jl#L89-L93">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.getindex-Tuple{NCDataset, AbstractString}" href="#Base.getindex-Tuple{NCDataset, AbstractString}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">v = getindex(ds::AbstractDataset, varname::SymbolOrString)</code></pre><p>Return the variable <code>varname</code> in the dataset <code>ds</code> as a <code>CFVariable</code>. The following CF convention are honored when the variable is indexed:</p><ul><li><code>_FillValue</code> or <code>missing_value</code> (which can be a list) will be returned as <code>missing</code>.</li><li><code>scale_factor</code> and <code>add_offset</code> are applied (output = <code>scale_factor</code> * <code>data_in_file</code> +  <code>add_offset</code>)</li><li>time variables (recognized by the units attribute and possibly the calendar attribute) are returned usually as <code>DateTime</code> object. Note that <code>CFTime.DateTimeAllLeap</code>, <code>CFTime.DateTimeNoLeap</code> and <code>CF.TimeDateTime360Day</code> cannot be converted to the proleptic gregorian calendar used in julia and are returned as such. (See <a href="https://github.com/JuliaGeo/CFTime.jl"><code>CFTime.jl</code></a> for more information about those date types.) If a calendar is defined but not among the ones specified in the CF convention, then the data in the file is not converted into a date structure.</li></ul><p>A call <code>getindex(ds, varname)</code> is usually written as <code>ds[varname]</code>.</p><p>If variable represents a cell boundary, the attributes <code>calendar</code> and <code>units</code> of the related variables are used, if they are not specified. For example:</p><pre><code class="nohighlight hljs">dimensions:
  time = UNLIMITED; // (5 currently)
  nv = 2;
variables:
  double time(time);
    time:long_name = &quot;time&quot;;
    time:units = &quot;hours since 1998-04-019 06:00:00&quot;;
    time:bounds = &quot;time_bnds&quot;;
  double time_bnds(time,nv);</code></pre><p>In this case, the variable <code>time_bnds</code> uses the units and calendar of <code>time</code> because both variables are related thought the bounds attribute following the CF conventions.</p><p>See also <a href="#CommonDataModel.cfvariable"><code>cfvariable(ds, varname)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/dataset.jl#L132-L168">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.variable" href="#CommonDataModel.variable"><code>CommonDataModel.variable</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">v = variable(ds::NCDataset,varname::String)</code></pre><p>Return the NetCDF variable <code>varname</code> in the dataset <code>ds</code> as a <code>NCDataset.Variable</code>. No scaling or other transformations are applied when the variable <code>v</code> is indexed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/2e4f51ae278174846d92fa4be4c7315e545efcf8/src/variable.jl#L76-L82">source</a></section><section><div><pre><code class="language-julia hljs">CommonDataModel.variable(ds::AbstractDataset,variablename::SymbolOrString)</code></pre><p>Return the variable with the name <code>variablename</code> from the data set <code>ds</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/variable.jl#L24-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.cfvariable" href="#CommonDataModel.cfvariable"><code>CommonDataModel.cfvariable</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">v = cfvariable(ds::NCDataset,varname::SymbolOrString; &lt;attrib&gt; = &lt;value&gt;)</code></pre><p>Return the variable <code>varname</code> in the dataset <code>ds</code> as a <code>NCDataset.CFVariable</code>. The keyword argument <code>&lt;attrib&gt;</code> are the attributes (<code>fillvalue</code>, <code>missing_value</code>, <code>scale_factor</code>, <code>add_offset</code>, <code>units</code> and <code>calendar</code>) relevant to the CF conventions. By specifing the value of these attributes, the one can override the value specified in the data set. If the attribute is set to <code>nothing</code>, then the attribute is not loaded and the corresponding transformation is ignored. This function is similar to <code>ds[varname]</code> with the additional flexibility that some variable attributes can be overridden.</p><p>Example:</p><pre><code class="language-julia hljs">NCDataset(&quot;foo.nc&quot;,&quot;c&quot;) do ds
  defVar(ds,&quot;data&quot;,[10., 11., 12., 13.], (&quot;time&quot;,), attrib = Dict(
      &quot;add_offset&quot; =&gt; 10.,
      &quot;scale_factor&quot; =&gt; 0.2))
end

# The stored (packed) valued are [0., 5., 10., 15.]
# since 0.2 .* [0., 5., 10., 15.] .+ 10 is [10., 11., 12., 13.]

ds = NCDataset(&quot;foo.nc&quot;);

@show ds[&quot;data&quot;].var[:]
# returns [0., 5., 10., 15.]

@show cfvariable(ds,&quot;data&quot;)[:]
# returns [10., 11., 12., 13.]

# neither add_offset nor scale_factor are applied
@show cfvariable(ds,&quot;data&quot;, add_offset = nothing, scale_factor = nothing)[:]
# returns [0, 5, 10, 15]

# add_offset is applied but not scale_factor
@show cfvariable(ds,&quot;data&quot;, scale_factor = nothing)[:]
# returns [10, 15, 20, 25]

# 0 is declared as the fill value (add_offset and scale_factor are applied as usual)
@show cfvariable(ds,&quot;data&quot;, fillvalue = 0)[:]
# returns [missing, 11., 12., 13.]

# Use the time units: days since 2000-01-01
@show cfvariable(ds,&quot;data&quot;, units = &quot;days since 2000-01-01&quot;)[:]
# returns [DateTime(2000,1,11), DateTime(2000,1,12), DateTime(2000,1,13), DateTime(2000,1,14)]

close(ds)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/cfvariable.jl#L33-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.sync" href="#CommonDataModel.sync"><code>CommonDataModel.sync</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sync(ds::NCDataset)</code></pre><p>Write all changes in NCDataset <code>ds</code> to the disk.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/2e4f51ae278174846d92fa4be4c7315e545efcf8/src/dataset.jl#L280-L284">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.close" href="#Base.close"><code>Base.close</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">close(ds::NCDataset)</code></pre><p>Close the NCDataset <code>ds</code>. All pending changes will be written to the disk.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/2e4f51ae278174846d92fa4be4c7315e545efcf8/src/dataset.jl#L291-L296">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.path" href="#CommonDataModel.path"><code>CommonDataModel.path</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">path(ds::NCDataset)</code></pre><p>Return the file path (or the opendap URL) of the NCDataset <code>ds</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/2e4f51ae278174846d92fa4be4c7315e545efcf8/src/dataset.jl#L271-L275">source</a></section><section><div><pre><code class="language-julia hljs">CommonDatamodel.path(ds::AbstractDataset)</code></pre><p>File path of the data set <code>ds</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/dataset.jl#L2-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NCDatasets.ncgen" href="#NCDatasets.ncgen"><code>NCDatasets.ncgen</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ncgen(fname; ...)
ncgen(fname,jlname; ...)</code></pre><p>Generate the Julia code that would produce a NetCDF file with the same metadata as the NetCDF file <code>fname</code>. The code is placed in the file <code>jlname</code> or printed to the standard output. By default the new NetCDF file is called <code>filename.nc</code>. This can be changed with the optional parameter <code>newfname</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/2e4f51ae278174846d92fa4be4c7315e545efcf8/src/ncgen.jl#L61-L69">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.varbyattrib" href="#CommonDataModel.varbyattrib"><code>CommonDataModel.varbyattrib</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">varbyattrib(ds, attname = attval)</code></pre><p>Returns a list of variable(s) which has the attribute <code>attname</code> matching the value <code>attval</code> in the dataset <code>ds</code>. The list is empty if the none of the variables has the match. The output is a list of <code>CFVariable</code>s.</p><p><strong>Examples</strong></p><p>Load all the data of the first variable with standard name &quot;longitude&quot; from the NetCDF file <code>results.nc</code>.</p><pre><code class="language-julia-repl hljs">julia&gt; ds = NCDataset(&quot;results.nc&quot;, &quot;r&quot;);
julia&gt; data = varbyattrib(ds, standard_name = &quot;longitude&quot;)[1][:]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/dataset.jl#L183-L201">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.write" href="#Base.write"><code>Base.write</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">write(dest::AbstractDataset, src::AbstractDataset; include = keys(src), exclude = [])</code></pre><p>Write the variables of <code>src</code> dataset into an empty <code>dest</code> dataset (which must be opened in mode <code>&quot;a&quot;</code> or <code>&quot;c&quot;</code>). The keywords <code>include</code> and <code>exclude</code> configure which variable of <code>src</code> should be included (by default all), or which should be <code>excluded</code> (by default none).</p><p>If the first argument is a file name, then the dataset is open in create mode (<code>&quot;c&quot;</code>).</p><p>This function is useful when you want to save the dataset from a multi-file dataset.</p><p>To save a subset, one can use the view function <code>view</code> to virtually slice a dataset:</p><p><strong>Example</strong></p><pre><code class="nohighlight hljs">NCDataset(fname_src) do ds
    write(fname_slice,view(ds, lon = 2:3))
end</code></pre><p>All variables in the source file <code>fname_src</code> with a dimension <code>lon</code> will be sliced along the indices <code>2:3</code> for the <code>lon</code> dimension. All attributes (and variables without a dimension <code>lon</code>) will be copied over unmodified.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/dataset.jl#L290-L315">source</a></section></article><p>Notice that DateTime-structures from <a href="http://juliageo.org/CFTime.jl/stable/">CFTime</a> are used to represent time for non-standard calendars. Otherwise, we attempt to use standard structures from the Julia standard library <code>Dates</code>.</p><h2 id="Groups"><a class="docs-heading-anchor" href="#Groups">Groups</a><a id="Groups-1"></a><a class="docs-heading-anchor-permalink" href="#Groups" title="Permalink"></a></h2><p>A NetCDF group is a dataset (with variables, attributes, dimensions and sub-groups) and can be arbitrarily nested. A group is created with <code>defGroup</code> and accessed via the <code>group</code> property of a <code>NCDataset</code>.</p><pre><code class="language-julia hljs"># create the variable &quot;temperature&quot; inside the group &quot;forecast&quot;
ds = NCDataset(&quot;results.nc&quot;, &quot;c&quot;);
ds_forecast = defGroup(ds,&quot;forecast&quot;)
defVar(ds_forecast,&quot;temperature&quot;,randn(10,11,12),(&quot;lon&quot;,&quot;lat&quot;,&quot;time&quot;))

# load the variable &quot;temperature&quot; inside the group &quot;forecast&quot;
forecast_temp = ds.group[&quot;forecast&quot;][&quot;temperature&quot;][:,:,:]
close(ds)</code></pre><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.defGroup" href="#CommonDataModel.defGroup"><code>CommonDataModel.defGroup</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">defGroup(ds::NCDataset,groupname; attrib = []))</code></pre><p>Create the group with the name <code>groupname</code> in the dataset <code>ds</code>. <code>attrib</code> is a list of attribute name and attribute value pairs (see <code>NCDataset</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/2e4f51ae278174846d92fa4be4c7315e545efcf8/src/groupes.jl#L35-L40">source</a></section><section><div><pre><code class="language-julia hljs">group = CommonDatamodel.defGroup(ds::AbstractDataset,name::SymbolOrString)</code></pre><p>Create an empty sub-group with the name <code>name</code> in the data set <code>ds</code>. The <code>group</code> is a sub-type of <code>AbstractDataset</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/dataset.jl#L48-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.getindex-Tuple{CommonDataModel.Groups, Any}" href="#Base.getindex-Tuple{CommonDataModel.Groups, Any}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">group = getindex(g::Groups,groupname::AbstractString)</code></pre><p>Return the NetCDF <code>group</code> with the name <code>groupname</code> from the parent group <code>g</code>.</p><p>For example:</p><pre><code class="language-julia hljs">ds = NCDataset(&quot;results.nc&quot;, &quot;r&quot;);
forecast_group = ds.group[&quot;forecast&quot;]
forecast_temp = forecast_group[&quot;temperature&quot;]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/dataset.jl#L259-L272">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.keys-Tuple{CommonDataModel.Groups}" href="#Base.keys-Tuple{CommonDataModel.Groups}"><code>Base.keys</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">names = keys(g::Groups)</code></pre><p>Return the names of all subgroubs of the group <code>g</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/dataset.jl#L252-L256">source</a></section></article><h2 id="Common-methods"><a class="docs-heading-anchor" href="#Common-methods">Common methods</a><a id="Common-methods-1"></a><a class="docs-heading-anchor-permalink" href="#Common-methods" title="Permalink"></a></h2><p>One can iterate over a dataset, attribute list, dimensions and NetCDF groups.</p><pre><code class="language-julia hljs">for (varname,var) in ds
    # all variables
    @show (varname,size(var))
end

for (attribname,attrib) in ds.attrib
    # all attributes
    @show (attribname,attrib)
end

for (groupname,group) in ds.groups
    # all groups
    @show (groupname,group)
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../dimensions/">Dimensions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Monday 4 November 2024 13:49">Monday 4 November 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
