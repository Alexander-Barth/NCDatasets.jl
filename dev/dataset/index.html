<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Datasets · NCDatasets.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">NCDatasets.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Datasets</a><ul class="internal"><li><a class="tocitem" href="#Groups-1"><span>Groups</span></a></li><li><a class="tocitem" href="#Common-methods-1"><span>Common methods</span></a></li></ul></li><li><a class="tocitem" href="../dimensions/">Dimensions</a></li><li><a class="tocitem" href="../variables/">Variables</a></li><li><a class="tocitem" href="../attributes/">Attributes</a></li><li><a class="tocitem" href="../performance/">Performance tips</a></li><li><a class="tocitem" href="../issues/">Known issues</a></li><li><a class="tocitem" href="../experimental/">Experimental features</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Datasets</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Datasets</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/master/docs/src/dataset.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Datasets-1"><a class="docs-heading-anchor" href="#Datasets-1">Datasets</a><a class="docs-heading-anchor-permalink" href="#Datasets-1" title="Permalink"></a></h1><p>This page is about loading/writing, examining and operating directly on entire NetCDF datasets. For functions regarding the variables stored in them, see the <a href="../variables/#Variables-1">Variables</a> page.</p><p>Both variables and datasets share the functionality of the <a href="../attributes/#Attributes-1">Attributes</a> section.</p><article class="docstring"><header><a class="docstring-binding" id="NCDatasets.NCDataset" href="#NCDatasets.NCDataset"><code>NCDatasets.NCDataset</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">NCDataset(filename::AbstractString, mode = &quot;r&quot;;
        format::Symbol = :netcdf4, attrib = [])</code></pre><p>Load, create, or even overwrite a NetCDF file at <code>filename</code>, depending on <code>mode</code>:</p><ul><li><code>&quot;r&quot;</code> (default) : open an existing netCDF file or OPeNDAP URL  in read-only mode.</li><li><code>&quot;c&quot;</code> : create a new NetCDF file at <code>filename</code> (an existing file with the same name will be overwritten).</li><li><code>&quot;a&quot;</code> : open <code>filename</code> into append mode (i.e. existing data in the netCDF file is not overwritten and a variable can be added).</li></ul><p>Notice that this does not close the dataset, use <code>close</code> on the result (or see below the <code>do</code>-block).</p><p>The optional parameter <code>attrib</code> is an iterable of attribute name and attribute value pairs, for example a <code>Dict</code>, <code>DataStructures.OrderedDict</code> or simply a vector of pairs (see example below).</p><p><strong>Supported <code>format</code> values:</strong></p><ul><li><code>:netcdf4</code> (default): HDF5-based NetCDF format.</li><li><code>:netcdf4_classic</code>: Only netCDF 3 compatible API features will be used.</li><li><code>:netcdf3_classic</code>: classic netCDF format supporting only files smaller than 2GB.</li><li><code>:netcdf3_64bit_offset</code>: improved netCDF format supporting files larger than 2GB.</li></ul><p>Files can also be open and automatically closed with a <code>do</code> block.</p><pre><code class="language-julia">NCDataset(&quot;file.nc&quot;) do ds
    data = ds[&quot;temperature&quot;][:,:]
end</code></pre><p>Here is an attribute example:</p><pre><code class="language-julia">using DataStructures
NCDataset(&quot;file.nc&quot;, &quot;c&quot;, attrib = OrderedDict(&quot;title&quot; =&gt; &quot;my first netCDF file&quot;)) do ds
   defVar(ds,&quot;temp&quot;,[10.,20.,30.],(&quot;time&quot;,))
end;</code></pre><p><code>NCDataset</code> is an alias to <code>NCDataset</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/dataset.jl#L146-L190">source</a></section><section><div><pre><code class="language-none">ds = NCDataset(var::CFVariable)
ds = NCDataset(var::Variable)</code></pre><p>Return the <code>NCDataset</code> containing the variable <code>var</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/variable.jl#L31-L36">source</a></section><section><div><pre><code class="language-julia">mfds = NCDataset(fnames,mode = &quot;r&quot;; aggdim = nothing, deferopen = true)</code></pre><p>Opens a multi-file dataset in read-only &quot;r&quot; or append mode &quot;a&quot;. <code>fnames</code> is a vector of file names. Variables are aggregated over the first unlimited dimension or over the dimension <code>aggdim</code> if specified. The append mode is only implemented when <code>deferopen</code> is <code>false</code>.</p><p>All variables containing the dimension <code>aggdim</code> are aggregated. The variable who do not contain the dimension <code>aggdim</code> are assumed constant.</p><p>If deferopen is <code>false</code>, all files are opened at the same time. However the operating system might limit the number of open files. In Linux, the limit can be controled with the <a href="https://stackoverflow.com/questions/34588/how-do-i-change-the-number-of-open-files-limit-in-linux">command <code>ulimit</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/multifile.jl#L83-L98">source</a></section></article><p>Useful functions that operate on datasets are:</p><article class="docstring"><header><a class="docstring-binding" id="Base.keys-Tuple{NCDataset}" href="#Base.keys-Tuple{NCDataset}"><code>Base.keys</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">keys(ds::NCDataset)</code></pre><p>Return a list of all variables names in NCDataset <code>ds</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/dataset.jl#L277-L281">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.haskey" href="#Base.haskey"><code>Base.haskey</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">haskey(ds::NCDataset,name)
haskey(d::Dimensions,name)
haskey(ds::Attributes,name)</code></pre><p>Return true if the NCDataset <code>ds</code> (or dimension/attribute list) has a variable (dimension/attribute) with the name <code>name</code>. For example:</p><pre><code class="language-julia">ds = NCDataset(&quot;/tmp/test.nc&quot;,&quot;r&quot;)
if haskey(ds,&quot;temperature&quot;)
    println(&quot;The file has a variable &#39;temperature&#39;&quot;)
end

if haskey(ds.dim,&quot;lon&quot;)
    println(&quot;The file has a dimension &#39;lon&#39;&quot;)
end</code></pre><p>This example checks if the file <code>/tmp/test.nc</code> has a variable with the name <code>temperature</code> and a dimension with the name <code>lon</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/dataset.jl#L378-L399">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.getindex-Tuple{NCDataset,AbstractString}" href="#Base.getindex-Tuple{NCDataset,AbstractString}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">v = getindex(ds::NCDataset,varname::AbstractString)</code></pre><p>Return the NetCDF variable <code>varname</code> in the dataset <code>ds</code> as a <code>NCDataset.CFVariable</code>. The CF convention are honored when the variable is indexed:</p><ul><li><code>_FillValue</code> will be returned as <code>missing</code></li><li><code>scale_factor</code> and <code>add_offset</code> are applied</li><li>time variables (recognized by the units attribute) are returned usually as <code>DateTime</code> object. Note that <code>DateTimeAllLeap</code>, <code>DateTimeNoLeap</code> and <code>DateTime360Day</code> cannot be converted to the proleptic gregorian calendar used in julia and are returned as such.</li></ul><p>A call <code>getindex(ds,varname)</code> is usually written as <code>ds[varname]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/cfvariable.jl#L251-L266">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NCDatasets.variable" href="#NCDatasets.variable"><code>NCDatasets.variable</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">v = variable(ds::NCDataset,varname::String)</code></pre><p>Return the NetCDF variable <code>varname</code> in the dataset <code>ds</code> as a <code>NCDataset.Variable</code>. No scaling or other transformations are applied when the variable <code>v</code> is indexed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/variable.jl#L72-L78">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NCDatasets.sync" href="#NCDatasets.sync"><code>NCDatasets.sync</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">sync(ds::NCDataset)</code></pre><p>Write all changes in NCDataset <code>ds</code> to the disk.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/dataset.jl#L292-L296">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.close" href="#Base.close"><code>Base.close</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">close(ds::NCDataset)</code></pre><p>Close the NCDataset <code>ds</code>. All pending changes will be written to the disk.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/dataset.jl#L303-L308">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NCDatasets.path" href="#NCDatasets.path"><code>NCDatasets.path</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">path(ds::NCDataset)</code></pre><p>Return the file path (or the opendap URL) of the NCDataset <code>ds</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/dataset.jl#L284-L287">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NCDatasets.ncgen" href="#NCDatasets.ncgen"><code>NCDatasets.ncgen</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">ncgen(fname; ...)
ncgen(fname,jlname; ...)</code></pre><p>Generate the Julia code that would produce a NetCDF file with the same metadata as the NetCDF file <code>fname</code>. The code is placed in the file <code>jlname</code> or printed to the standard output. By default the new NetCDF file is called <code>filename.nc</code>. This can be changed with the optional parameter <code>newfname</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/ncgen.jl#L52-L60">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NCDatasets.varbyattrib" href="#NCDatasets.varbyattrib"><code>NCDatasets.varbyattrib</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">varbyattrib(ds, attname = attval)</code></pre><p>Returns a list of variable(s) which has the attribute <code>attname</code> matching the value <code>attval</code> in the dataset <code>ds</code>. The list is empty if the none of the variables has the match. The output is a list of <code>CFVariable</code>s.</p><p><strong>Examples</strong></p><p>Load all the data of the first variable with standard name &quot;longitude&quot; from the NetCDF file <code>results.nc</code>.</p><pre><code class="language-julia-repl">julia&gt; ds = NCDataset(&quot;results.nc&quot;, &quot;r&quot;);
julia&gt; data = varbyattrib(ds, standard_name = &quot;longitude&quot;)[1][:]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/dataset.jl#L323-L341">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.write" href="#Base.write"><code>Base.write</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">write(dest_filename::AbstractString, src::AbstractDataset; include = keys(src), exclude = [])
write(dest::NCDataset, src::AbstractDataset; include = keys(src), exclude = [])</code></pre><p>Write the variables of <code>src</code> dataset into an empty <code>dest</code> dataset (which must be opened in mode <code>&quot;a&quot;</code> or <code>&quot;c&quot;</code>). The keywords <code>include</code> and <code>exclude</code> configure which variable of <code>src</code> should be included (by default all), or which should be <code>excluded</code> (by default none).</p><p>If the first argument is a file name, then the dataset is open in create mode (<code>c</code>).</p><p>This function is useful when you want to save the dataset from a multi-file dataset.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/dataset.jl#L463-L474">source</a></section></article><p>Notice that DateTime-structures from <a href="http://juliageo.org/CFTime.jl/stable/">CFTime</a> are used to represent time for non-standard calendars. Otherwise, we attempt to use standard structures from the Julia standard library <code>Dates</code>.</p><h2 id="Groups-1"><a class="docs-heading-anchor" href="#Groups-1">Groups</a><a class="docs-heading-anchor-permalink" href="#Groups-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="NCDatasets.defGroup-Tuple{NCDataset,Any}" href="#NCDatasets.defGroup-Tuple{NCDataset,Any}"><code>NCDatasets.defGroup</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">defGroup(ds::NCDataset,groupname, attrib = []))</code></pre><p>Create the group with the name <code>groupname</code> in the dataset <code>ds</code>. <code>attrib</code> is a list of attribute name and attribute value pairs (see <code>NCDataset</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/groupes.jl#L33-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.getindex-Tuple{NCDatasets.Groups,AbstractString}" href="#Base.getindex-Tuple{NCDatasets.Groups,AbstractString}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">group = getindex(g::NCDatasets.Groups,groupname::AbstractString)</code></pre><p>Return the NetCDF <code>group</code> with the name <code>groupname</code>. For example:</p><pre><code class="language-julia-repl">julia&gt; ds = NCDataset(&quot;results.nc&quot;, &quot;r&quot;);
julia&gt; forecast_group = ds.group[&quot;forecast&quot;]
julia&gt; forecast_temp = forecast_group[&quot;temperature&quot;]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/groupes.jl#L15-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.keys-Tuple{NCDatasets.Groups}" href="#Base.keys-Tuple{NCDatasets.Groups}"><code>Base.keys</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">Base.keys(g::NCDatasets.Groups)</code></pre><p>Return the names of all subgroubs of the group <code>g</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/groupes.jl#L4-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="NCDatasets.groupname-Tuple{NCDataset}" href="#NCDatasets.groupname-Tuple{NCDataset}"><code>NCDatasets.groupname</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">groupname(ds::NCDataset)</code></pre><p>Return the group name of the NCDataset <code>ds</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/317bc9a665c868ec93d6b41db816275593b4f457/src/groupes.jl#L54-L57">source</a></section></article><h2 id="Common-methods-1"><a class="docs-heading-anchor" href="#Common-methods-1">Common methods</a><a class="docs-heading-anchor-permalink" href="#Common-methods-1" title="Permalink"></a></h2><p>One can iterate over a dataset, attribute list, dimensions and NetCDF groups.</p><pre><code class="language-julia">for (varname,var) in ds
    # all variables
    @show (varname,size(var))
end

for (attribname,attrib) in ds.attrib
    # all attributes
    @show (attribname,attrib)
end

for (groupname,group) in ds.groups
    # all groups
    @show (groupname,group)
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../dimensions/">Dimensions »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 19 March 2020 22:50">Thursday 19 March 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
