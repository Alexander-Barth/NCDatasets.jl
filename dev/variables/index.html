<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Variables · NCDatasets.jl</title><meta name="title" content="Variables · NCDatasets.jl"/><meta property="og:title" content="Variables · NCDatasets.jl"/><meta property="twitter:title" content="Variables · NCDatasets.jl"/><meta name="description" content="Documentation for NCDatasets.jl."/><meta property="og:description" content="Documentation for NCDatasets.jl."/><meta property="twitter:description" content="Documentation for NCDatasets.jl."/><meta property="og:url" content="https://alexander-barth.github.io/NCDatasets.jl/variables/"/><meta property="twitter:url" content="https://alexander-barth.github.io/NCDatasets.jl/variables/"/><link rel="canonical" href="https://alexander-barth.github.io/NCDatasets.jl/variables/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="NCDatasets.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">NCDatasets.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../dataset/">Datasets</a></li><li><a class="tocitem" href="../dimensions/">Dimensions</a></li><li class="is-active"><a class="tocitem" href>Variables</a><ul class="internal"><li><a class="tocitem" href="#Creating-a-variable"><span>Creating a variable</span></a></li><li><a class="tocitem" href="#Storage-parameter-of-a-variable"><span>Storage parameter of a variable</span></a></li><li><a class="tocitem" href="#Coordinate-variables-and-cell-boundaries"><span>Coordinate variables and cell boundaries</span></a></li></ul></li><li><a class="tocitem" href="../attributes/">Attributes</a></li><li><a class="tocitem" href="../performance/">Performance tips</a></li><li><a class="tocitem" href="../other/">Other features</a></li><li><a class="tocitem" href="../issues/">Known issues</a></li><li><a class="tocitem" href="../tutorials/">Tutorials</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Variables</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Variables</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Alexander-Barth/NCDatasets.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/master/docs/src/variables.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Variables"><a class="docs-heading-anchor" href="#Variables">Variables</a><a id="Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Variables" title="Permalink"></a></h1><p>Variables (like e.g. <code>CFVariable</code>) are the quantities contained within a NetCDF dataset. See the <a href="../dataset/#Datasets">Datasets</a> page on how to obtain them from a dataset.</p><p>Different type of arrays are involved when working with NCDatasets. For instance assume that <code>test.nc</code> is a file with a <code>Float32</code> variable called <code>variable</code>.</p><pre><code class="language-julia hljs">using NCDatasets
ds = NCDataset(&quot;test.nc&quot;)
ncvar_cf = ds[&quot;variable&quot;]</code></pre><p>The variable <code>ncvar_cf</code> has the type <code>CFVariable</code>. No data is actually loaded from disk, but you can query its size, number of dimensions, number elements, etc., using the functions <code>size</code>, <code>ndims</code>, <code>length</code> as if <code>ncvar_cf</code> was an ordinary Julia array.</p><p>To load the variable <code>ncvar_cf</code> in memory you can convert it into an array with:</p><pre><code class="language-julia hljs">data = Array(ncvar_cf)
# or
data = ncvar_cf |&gt; Array
# or if ndims(ncvar_cf) == 2
data = ncvar_cf[:,:]</code></pre><p>Since NCDatasets 0.13, the syntax <code>ncvar_cf[:]</code> flattens the array, and is not equivalent with the above (unless <code>ncvar_cf</code> is a vector).</p><p>You can only load sub-parts of it in memory via indexing each dimension:</p><pre><code class="language-julia hljs">ncvar_cf[1:5, 10:20]</code></pre><p>A scalar variable can be loaded using <code>[]</code>, for example:</p><pre><code class="language-julia hljs">using NCDatasets
NCDataset(&quot;test_scalar.nc&quot;,&quot;c&quot;) do ds
    # the list of dimension names is simple `()` as a scalar does not have dimensions
    defVar(ds,&quot;scalar&quot;,42,())
end

ds = NCDataset(&quot;test_scalar.nc&quot;)
value = ds[&quot;scalar&quot;][] # 42</code></pre><p>To load all a variable in a NetCDF file ignoring attributes like <code>scale_factor</code>, <code>add_offset</code>, <code>_FillValue</code> and time units one can use the property <code>var</code> or the function <code>variable</code> for example:</p><pre><code class="language-julia hljs">using NCDatasets
using Dates
data = [DateTime(2000,1,1), DateTime(2000,1,2)]
NCDataset(&quot;test_file.nc&quot;,&quot;c&quot;) do ds
    defVar(ds,&quot;time&quot;,data,(&quot;time&quot;,), attrib = Dict(
               &quot;units&quot; =&gt; &quot;days since 2000-01-01&quot;))
end;

ds = NCDataset(&quot;test_file.nc&quot;)
ncvar = ds[&quot;time&quot;].var
# or
ncvar = variable(ds,&quot;time&quot;)
data = ncvar[:] # here [0., 1.]</code></pre><p>The variable <code>ncvar</code> can be indexed in the same way as <code>ncvar_cf</code> explained above.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>NCDatasets.Variable</code> and <code>NCDatasets.CFVariable</code> implement the interface of <code>AbstractArray</code>. It is thus possible to call any function that accepts an <code>AbstractArray</code>. But functions like <code>mean</code>, <code>sum</code> (and many more) would load every element individually which is very inefficient for large fields read from disk. You should instead convert such a variable to a standard Julia <code>Array</code> and then do computations with it. See also the <a href="../performance/#performance_tips">performance tips</a> for more information.</p></div></div><p>The following functions are convenient for working with variables:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.size-Tuple{CommonDataModel.CFVariable}" href="#Base.size-Tuple{CommonDataModel.CFVariable}"><code>Base.size</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sz = size(var::CFVariable)</code></pre><p>Return a tuple of integers with the size of the variable <code>var</code>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Note that the size of a variable can change, i.e. for a variable with an unlimited dimension.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/cfvariable.jl#L4-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.dimnames" href="#CommonDataModel.dimnames"><code>CommonDataModel.dimnames</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">names = dimnames(ds::AbstractNCDataset; parents = false)</code></pre><p>Return all names defined in <code>ds</code>. When <code>parents</code> is <code>true</code>, also the names of parent groups are returned (default is <code>false</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/dataset.jl#L355-L360">source</a></section><section><div><pre><code class="language-julia hljs">dimnames(v::Variable)</code></pre><p>Return a tuple of strings with the dimension names of the variable <code>v</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/variable.jl#L214-L218">source</a></section><section><div><pre><code class="language-julia hljs">CommonDataModel.dimnames(v::AbstractVariable)</code></pre><p>Return an iterable of the dimension names of the variable <code>v</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/variable.jl#L9-L13">source</a></section><section><div><pre><code class="language-julia hljs">dimnames(v::CFVariable)</code></pre><p>Return a tuple of strings with the dimension names of the variable <code>v</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/cfvariable.jl#L543-L547">source</a></section><section><div><pre><code class="language-julia hljs">CommonDatamodel.dimnames(ds::AbstractDataset)</code></pre><p>Return an iterable of all dimension names in <code>ds</code>. This information can also be accessed using the property <code>ds.dim</code>:</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">ds = NCDataset(&quot;results.nc&quot;, &quot;r&quot;);
dimnames = keys(ds.dim)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/dimension.jl#L2-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NCDatasets.dimsize" href="#NCDatasets.dimsize"><code>NCDatasets.dimsize</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dimsize(v::CFVariable)</code></pre><p>Get the size of a <code>CFVariable</code> as a named tuple of dimension → length.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/cfvariable.jl#L247-L250">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.name" href="#CommonDataModel.name"><code>CommonDataModel.name</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">name(ds::NCDataset)</code></pre><p>Return the group name of the NCDataset <code>ds</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/groupes.jl#L55-L59">source</a></section><section><div><pre><code class="language-julia hljs">name(v::Variable)</code></pre><p>Return the name of the NetCDF variable <code>v</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/variable.jl#L224-L228">source</a></section><section><div><pre><code class="language-julia hljs">CommonDatamodel.name(ds::AbstractDataset)</code></pre><p>Name of the group of the data set <code>ds</code>. For a data set containing only a single group, this will be always the root group <code>&quot;/&quot;</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/dataset.jl#L12-L17">source</a></section><section><div><pre><code class="language-julia hljs">CommonDataModel.name(v::AbstractVariable)</code></pre><p>Return the name of the variable <code>v</code> as a string.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/variable.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NCDatasets.renameVar" href="#NCDatasets.renameVar"><code>NCDatasets.renameVar</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">renameVar(ds::NCDataset,oldname,newname)</code></pre><p>Rename the variable called <code>oldname</code> to <code>newname</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/variable.jl#L42-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NCDatasets.NCDataset-Tuple{CommonDataModel.CFVariable}" href="#NCDatasets.NCDataset-Tuple{CommonDataModel.CFVariable}"><code>NCDatasets.NCDataset</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mfds = NCDataset(fnames, mode = &quot;r&quot;; aggdim = nothing, deferopen = true,
              isnewdim = false,
              constvars = [])</code></pre><p>Opens a multi-file dataset in read-only <code>&quot;r&quot;</code> or append mode <code>&quot;a&quot;</code>. <code>fnames</code> is a vector of file names.</p><p>Variables are aggregated over the first unlimited dimension or over the dimension <code>aggdim</code> if specified. Variables without the dimensions <code>aggdim</code> are not aggregated. All variables containing the dimension <code>aggdim</code> are aggregated. The variable who do not contain the dimension <code>aggdim</code> are assumed constant.</p><p>If variables should be aggregated over a new dimension (not present in the NetCDF file), one should set <code>isnewdim</code> to <code>true</code>. All NetCDF files should have the same variables, attributes and groupes. Per default, all variables will have an additional dimension unless they are marked as constant using the <code>constvars</code> parameter.</p><p>The append mode is only implemented when <code>deferopen</code> is <code>false</code>. If deferopen is <code>false</code>, all files are opened at the same time. However the operating system might limit the number of open files. In Linux, the limit can be controled with the <a href="https://stackoverflow.com/questions/34588/how-do-i-change-the-number-of-open-files-limit-in-linux">command <code>ulimit</code></a>.</p><p>All metadata (attributes and dimension length are assumed to be the same for all NetCDF files. Otherwise reading the attribute of a multi-file dataset would be ambiguous. An exception to this rule is the length of the dimension over which the data is aggregated. This aggregation dimension can varify from file to file.</p><p>Setting the experimental flag <code>_aggdimconstant</code> to <code>true</code> means that the length of the aggregation dimension is constant. This speeds up the creating of a multi-file dataset as only the metadata of the first file has to be loaded.</p><p>Examples:</p><p>You can use <a href="https://github.com/vtjnash/Glob.jl">Glob.jl</a> to make <code>fnames</code> from a file pattern, e.g.</p><pre><code class="language-julia hljs">using NCDatasets, Glob
ds = NCDataset(glob(&quot;ERA5_monthly3D_reanalysis_*.nc&quot;))</code></pre><p>Aggregation over a new dimension:</p><pre><code class="language-julia hljs">using NCDatasets
for i = 1:3
  NCDataset(&quot;foo$i.nc&quot;,&quot;c&quot;) do ds
    defVar(ds,&quot;data&quot;,[10., 11., 12., 13.], (&quot;lon&quot;,))
  end
end

ds = NCDataset([&quot;foo$i.nc&quot; for i = 1:3],aggdim = &quot;sample&quot;, isnewdim = true)
size(ds[&quot;data&quot;])
# output
# (4, 3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/multifile.jl#L1-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NCDatasets.nomissing" href="#NCDatasets.nomissing"><code>NCDatasets.nomissing</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">a = nomissing(da)</code></pre><p>Return the values of the array <code>da</code> of type <code>Array{Union{T,Missing},N}</code> (potentially containing missing values) as a regular Julia array <code>a</code> of the same element type. It raises an error if the array contains at least one missing value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/variable.jl#L338-L345">source</a></section><section><div><pre><code class="language-julia hljs">a = nomissing(da,value)</code></pre><p>Retun the values of the array <code>da</code> of type <code>AbstractArray{Union{T,Missing},N}</code> as a regular Julia array <code>a</code> by replacing all missing value by <code>value</code> (converted to type <code>T</code>). This function is identical to <code>coalesce.(da,T(value))</code> where T is the element type of <code>da</code>.</p><p><strong>Example:</strong></p><pre><code class="language-julia-repl hljs">julia&gt; nomissing([missing,1.,2.],NaN)
# returns [NaN, 1.0, 2.0]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/variable.jl#L366-L380">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.fillvalue" href="#CommonDataModel.fillvalue"><code>CommonDataModel.fillvalue</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fv = fillvalue(v::Variable)
fv = fillvalue(v::CFVariable)</code></pre><p>Return the fill-value of the variable <code>v</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/variable.jl#L325-L330">source</a></section><section><div><pre><code class="language-julia hljs">fillvalue(::Type{Int8})
fillvalue(::Type{UInt8})
fillvalue(::Type{Int16})
fillvalue(::Type{UInt16})
fillvalue(::Type{Int32})
fillvalue(::Type{UInt32})
fillvalue(::Type{Int64})
fillvalue(::Type{UInt64})
fillvalue(::Type{Float32})
fillvalue(::Type{Float64})
fillvalue(::Type{Char})
fillvalue(::Type{String})</code></pre><p>Default fill-value for the given type from NetCDF.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/variable.jl#L38-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NCDatasets.loadragged" href="#NCDatasets.loadragged"><code>NCDatasets.loadragged</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs"> data = loadragged(ncvar,index::Union{Colon,UnitRange,Integer})</code></pre><p>Load data from <code>ncvar</code> in the <a href="https://web.archive.org/web/20190111092546/http://cfconventions.org/cf-conventions/v1.6.0/cf-conventions.html#_contiguous_ragged_array_representation">contiguous ragged array representation</a> as a vector of vectors. It is typically used to load a list of profiles or time series of different length each.</p><p>The <a href="https://web.archive.org/web/20190111092546/http://cfconventions.org/cf-conventions/v1.6.0/cf-conventions.html#_indexed_ragged_array_representation">indexed ragged array representation</a> is currently not supported.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/variable.jl#L161-L169">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.load!" href="#CommonDataModel.load!"><code>CommonDataModel.load!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NCDatasets.load!(ncvar::Variable, data, indices)</code></pre><p>Loads a NetCDF variables <code>ncvar</code> in-place and puts the result in <code>data</code> along the specified <code>indices</code>. One can use @inbounds annotate code where bounds checking can be elided by the compiler (which typically require type-stable code).</p><pre><code class="language-julia hljs">using NCDatasets
ds = NCDataset(&quot;file.nc&quot;)
ncv = ds[&quot;vgos&quot;].var;
# data must have the right shape and type
data = zeros(eltype(ncv),size(ncv));
NCDatasets.load!(ncv,data,:,:,:)
# or
# @inbounds NCDatasets.load!(ncv,data,:,:,:)
close(ds)

# loading a subset
data = zeros(5); # must have the right shape and type
load!(ds[&quot;temp&quot;].var,data,:,1) # loads the 1st column</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>For a netCDF variable of type <code>NC_CHAR</code>, the element type of the <code>data</code> array must be <code>UInt8</code> and cannot be the julia <code>Char</code> type, because the julia <code>Char</code> type uses 4 bytes and the NetCDF <code>NC_CHAR</code> only 1 byte.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/variable.jl#L109-L138">source</a></section><section><div><pre><code class="language-julia hljs">CommonDataModel.load!(ncvar::CFVariable, data, buffer, indices)</code></pre><p>Loads a NetCDF (or other format) variables <code>ncvar</code> in-place and puts the result in <code>data</code> (an array of <code>eltype(ncvar)</code>) along the specified <code>indices</code>. <code>buffer</code> is a temporary  array of the same size as data but the type should be <code>eltype(ncv.var)</code>, i.e. the corresponding type in the files (before applying <code>scale_factor</code>, <code>add_offset</code> and masking fill values). Scaling and masking will be applied to the array <code>data</code>.</p><p><code>data</code> and <code>buffer</code> can be the same array if <code>eltype(ncvar) == eltype(ncvar.var)</code>.</p><p><strong>Example:</strong></p><pre><code class="language-julia hljs"># create some test array
Dataset(&quot;file.nc&quot;,&quot;c&quot;) do ds
    defDim(ds,&quot;time&quot;,3)
    ncvar = defVar(ds,&quot;vgos&quot;,Int16,(&quot;time&quot;,),attrib = [&quot;scale_factor&quot; =&gt; 0.1])
    ncvar[:] = [1.1, 1.2, 1.3]
    # store 11, 12 and 13 as scale_factor is 0.1
end


ds = Dataset(&quot;file.nc&quot;)
ncv = ds[&quot;vgos&quot;];
# data and buffer must have the right shape and type
data = zeros(eltype(ncv),size(ncv)); # here Vector{Float64}
buffer = zeros(eltype(ncv.var),size(ncv)); # here Vector{Int16}
NCDatasets.load!(ncv,data,buffer,:,:,:)
close(ds)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/cfvariable.jl#L577-L609">source</a></section></article><h2 id="Creating-a-variable"><a class="docs-heading-anchor" href="#Creating-a-variable">Creating a variable</a><a id="Creating-a-variable-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-a-variable" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.defVar" href="#CommonDataModel.defVar"><code>CommonDataModel.defVar</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">defVar(ds::NCDataset,name,vtype,dimnames; kwargs...)
defVar(ds::NCDataset,name,data,dimnames; kwargs...)</code></pre><p>Define a variable with the name <code>name</code> in the dataset <code>ds</code>.  <code>vtype</code> can be Julia types in the table below (with the corresponding NetCDF type). The parameter <code>dimnames</code> is a tuple with the names of the dimension.  For scalar this parameter is the empty tuple <code>()</code>. The variable is returned (of the type <code>CFVariable</code>).</p><p>Instead of providing the variable type one can directly give also the data <code>data</code> which will be used to fill the NetCDF variable. In this case, the dimensions with the appropriate size will be created as required using the names in <code>dimnames</code>.</p><p>If <code>data</code> is a vector or array of <code>DateTime</code> objects, then the dates are saved as double-precision floats and units &quot;days since 1900-01-01 00:00:00&quot; (unless a time unit is specifed with the <code>attrib</code> keyword as described below). Dates are converted to the default calendar in the CF conversion which is the mixed Julian/Gregorian calendar.</p><p><strong>Keyword arguments</strong></p><ul><li><code>fillvalue</code>: A value filled in the NetCDF file to indicate missing data.  It will be stored in the _FillValue attribute. <code>NCDatasets</code> does not use implicitely the default NetCDF fill values when reading data.</li><li><code>chunksizes</code>: Vector integers setting the chunk size. The total size of a chunk must be less than 4 GiB.</li><li><code>deflatelevel</code>: Compression level: 0 (default) means no compression and 9 means maximum compression. Each chunk will be compressed individually.</li><li><code>shuffle</code>: If true, the shuffle filter is activated which can improve the compression ratio.</li><li><code>checksum</code>: The checksum method can be <code>:fletcher32</code> or <code>:nochecksum</code> (checksumming is disabled, which is the default)</li><li><code>attrib</code>: An iterable of attribute name and attribute value pairs, for example a <code>Dict</code>, <code>DataStructures.OrderedDict</code> or simply a vector of pairs (see example below)</li><li><code>typename</code> (string): The name of the NetCDF type required for <a href="https://web.archive.org/save/https://www.unidata.ucar.edu/software/netcdf/netcdf-4/newdocs/netcdf-c/nc_005fdef_005fvlen.html">vlen arrays</a></li></ul><p><code>chunksizes</code>, <code>deflatelevel</code>, <code>shuffle</code> and <code>checksum</code> can only be set on NetCDF 4 files. Compression of strings and variable-length arrays is not supported by the underlying NetCDF library.</p><p><strong>NetCDF data types</strong></p><table><tr><th style="text-align: right">NetCDF Type</th><th style="text-align: right">Julia Type</th></tr><tr><td style="text-align: right">NC_BYTE</td><td style="text-align: right">Int8</td></tr><tr><td style="text-align: right">NC_UBYTE</td><td style="text-align: right">UInt8</td></tr><tr><td style="text-align: right">NC_SHORT</td><td style="text-align: right">Int16</td></tr><tr><td style="text-align: right">NC_INT</td><td style="text-align: right">Int32</td></tr><tr><td style="text-align: right">NC_INT64</td><td style="text-align: right">Int64</td></tr><tr><td style="text-align: right">NC_FLOAT</td><td style="text-align: right">Float32</td></tr><tr><td style="text-align: right">NC_DOUBLE</td><td style="text-align: right">Float64</td></tr><tr><td style="text-align: right">NC_CHAR</td><td style="text-align: right">Char</td></tr><tr><td style="text-align: right">NC_STRING</td><td style="text-align: right">String</td></tr></table><p><strong>Dimension ordering</strong></p><p>The data is stored in the NetCDF file in the same order as they are stored in memory. As julia uses the <a href="https://en.wikipedia.org/wiki/Row-_and_column-major_order">Column-major ordering</a> for arrays, the order of dimensions will appear reversed when the data is loaded in languages or programs using <a href="https://en.wikipedia.org/wiki/Row-_and_column-major_order">Row-major ordering</a> such as C/C++, Python/NumPy or the tools <code>ncdump</code>/<code>ncgen</code> (<a href="https://web.archive.org/web/20220513091844/https://docs.unidata.ucar.edu/nug/current/_c_d_l.html">NetCDF CDL</a>). NumPy can also use Column-major ordering but Row-major order is the default. For the column-major interpretation of the dimensions (as in Julia), the <a href="https://web.archive.org/web/20220328110810/http://cfconventions.org/Data/cf-conventions/cf-conventions-1.7/cf-conventions.html#dimensions">CF Convention recommends</a> the order  &quot;longitude&quot; (X), &quot;latitude&quot; (Y), &quot;height or depth&quot; (Z) and &quot;date or time&quot; (T) (if applicable). All other dimensions should, whenever possible, be placed to the right of the spatiotemporal dimensions.</p><p><strong>Example:</strong></p><p>In this example, <code>scale_factor</code> and <code>add_offset</code> are applied when the <code>data</code> is saved.</p><pre><code class="language-julia-repl hljs">julia&gt; using DataStructures
julia&gt; data = randn(3,5)
julia&gt; NCDataset(&quot;test_file.nc&quot;,&quot;c&quot;) do ds
          defVar(ds,&quot;temp&quot;,data,(&quot;lon&quot;,&quot;lat&quot;), attrib = OrderedDict(
             &quot;units&quot; =&gt; &quot;degree_Celsius&quot;,
             &quot;add_offset&quot; =&gt; -273.15,
             &quot;scale_factor&quot; =&gt; 0.1,
             &quot;long_name&quot; =&gt; &quot;Temperature&quot;
          ))
       end;</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If the attributes <code>_FillValue</code>, <code>missing_value</code>, <code>add_offset</code>, <code>scale_factor</code>, <code>units</code> and <code>calendar</code> are used, they should be defined when calling <code>defVar</code> by using the parameter <code>attrib</code> as shown in the example above.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/cfvariable.jl#L5-L98">source</a></section><section><div><pre><code class="language-julia hljs">v = CommonDataModel.defVar(ds::AbstractDataset,src::AbstractVariable)
v = CommonDataModel.defVar(ds::AbstractDataset,name::SymbolOrString,src::AbstractVariable)</code></pre><p>Defines and return the variable in the data set <code>ds</code> copied from the variable <code>src</code>. The dimension name, attributes and data are copied from <code>src</code> as well as the variable name (unless provide by <code>name</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/variable.jl#L198-L205">source</a></section></article><h2 id="Storage-parameter-of-a-variable"><a class="docs-heading-anchor" href="#Storage-parameter-of-a-variable">Storage parameter of a variable</a><a id="Storage-parameter-of-a-variable-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-parameter-of-a-variable" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.chunking" href="#CommonDataModel.chunking"><code>CommonDataModel.chunking</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">storage,chunksizes = chunking(v::Variable)</code></pre><p>Return the storage type (<code>:contiguous</code> or <code>:chunked</code>) and the chunk sizes of the varable <code>v</code>. Note that <code>chunking</code> reports the same information as <code>nc_inq_var_chunking</code> and therefore <a href="https://github.com/Unidata/netcdf-c/discussions/2224">considers variables with unlimited dimension as <code>:contiguous</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/variable.jl#L234-L241">source</a></section><section><div><pre><code class="language-julia hljs">storage,chunksizes = chunking(v::MFVariable)
storage,chunksizes = chunking(v::MFCFVariable)</code></pre><p>Return the storage type (<code>:contiguous</code> or <code>:chunked</code>) and the chunk sizes of the varable <code>v</code> corresponding to the first file. If the first file in the collection is chunked then this storage attributes are returned. If not the first file is not contiguous, then multi-file variable is still reported as chunked with chunk size equal to the size of the first variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/multifile.jl#L255-L262">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.deflate" href="#CommonDataModel.deflate"><code>CommonDataModel.deflate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">isshuffled,isdeflated,deflate_level = deflate(v::Variable)</code></pre><p>Return compression information of the variable <code>v</code>. If shuffle is <code>true</code>, then shuffling (byte interlacing) is activated. If deflate is <code>true</code>, then the data chunks (see <code>chunking</code>) are compressed using the compression level <code>deflate_level</code> (0 means no compression and 9 means maximum compression).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/variable.jl#L295-L303">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.checksum" href="#CommonDataModel.checksum"><code>CommonDataModel.checksum</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">checksummethod = checksum(v::Variable)</code></pre><p>Return the checksum method of the variable <code>v</code> which can be either be <code>:fletcher32</code> or <code>:nochecksum</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/NCDatasets.jl/blob/5bc914605deca7933760dcbbfaf52a535261ffa1/src/variable.jl#L310-L315">source</a></section></article><h2 id="Coordinate-variables-and-cell-boundaries"><a class="docs-heading-anchor" href="#Coordinate-variables-and-cell-boundaries">Coordinate variables and cell boundaries</a><a id="Coordinate-variables-and-cell-boundaries-1"></a><a class="docs-heading-anchor-permalink" href="#Coordinate-variables-and-cell-boundaries" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.coord" href="#CommonDataModel.coord"><code>CommonDataModel.coord</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cv = coord(v::Union{CFVariable,Variable},standard_name)</code></pre><p>Find the coordinate of the variable <code>v</code> by the standard name <code>standard_name</code> or some <a href="https://web.archive.org/web/20190918144052/http://cfconventions.org/cf-conventions/cf-conventions.html#latitude-coordinate">standardized heuristics based on units</a>. If the heuristics fail to detect the coordinate, consider to modify the file to add the <code>standard_name</code> attribute. All dimensions of the coordinate must also be dimensions of the variable <code>v</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using NCDatasets
ds = NCDataset(&quot;file.nc&quot;)
ncv = ds[&quot;SST&quot;]
lon = coord(ncv,&quot;longitude&quot;)[:]
lat = coord(ncv,&quot;latitude&quot;)[:]
v = ncv[:]
close(ds)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/cfconventions.jl#L111-L129">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonDataModel.bounds" href="#CommonDataModel.bounds"><code>CommonDataModel.bounds</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">b = bounds(ncvar::NCDatasets.CFVariable)</code></pre><p>Return the CFVariable corresponding to the <code>bounds</code> attribute of the variable <code>ncvar</code>. The time units and calendar from the <code>ncvar</code> are used but not the attributes controling the packing of data <code>scale_factor</code>, <code>add_offset</code> and <code>_FillValue</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaGeo/CommonDataModel.jl/blob/v0.3.6/src/cfconventions.jl#L184-L191">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../dimensions/">« Dimensions</a><a class="docs-footer-nextpage" href="../attributes/">Attributes »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Friday 11 October 2024 12:41">Friday 11 October 2024</span>. Using Julia version 1.11.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
